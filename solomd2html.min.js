function parse(t,e){let n=function(t){const e=[];let n=null;for(const c of t){const t=c.trim(),r="fence"===n?.type?"fence":l(t);n||(n={type:r,content:[]}),o(n,r,t)?("fence"===r&&n.content.push(c),e.push({...n,content:n.content.join("\n")}),n="fence"===r?null:t?{type:r,content:[c]}:null):n.content.push(c)}n&&e.push({...n,content:n.content.join("\n")});return e}(t.replace(/\r\n/g,"\n").split("\n"));function c(t){const e=document.createElement("span");return e.innerHTML=t.replace(/`([^`]+)`/g,"<code>$1</code>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/__(.*?)__/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/_(.*?)_/g,"<em>$1</em>").replace(/~~(.*?)~~/g,"<del>$1</del>"),e}function l(t){return/^\s{0,3}>/.test(t)?"blockquote":/^\s*([-+*]|\d+\.)\s/.test(t)?"list":/^\s*([`']{3,})\s{0,}(\w+)?\s*$/.test(t)?"fence":/^(\s{4,}|\t)/.test(t)?"indented":/^\s*<.+?>/.test(t)?"html":""===t?"empty":/^\s*(\||\+).+(\||\+)\s*$/.test(t)?"table":"general"}function o(t,e,n){const c=t.type;if("indented"===c)return!(n.startsWith("    ")||n.startsWith("\t"));if("blockquote"===c)return!/^\s{0,3}>/.test(n);if("html"===c)return/<\/.+?>/.test(n);if("general"===c)return""===n;if("fence"===c){const l=t.content.length>1&&/^\s*([`']{3,})/.test(t.content?.[0]),o=c===e,r=/^\s*([`']{3,})/.test(n);return l&&o&&r}return c!==e}n=function(t){if(!t||t.length<1)return t;const e=[];let n=[];t.forEach((t=>{"html"===t.type?n.push(`${t.content}\n`):n.length>0?(e.push({type:"html",content:n.join("")}),n=[]):e.push(t)})),n.length>0&&e.push({type:"html",content:n.join("")});return e}(n),n.forEach(((t,n)=>{const l=function(t){let e=function(t){let e=t?.type||"";if(!e)return"";/^(_{3,}|\-{3,}|\*{3,})/.test(t.content)&&(e="hr");return{general:"p",blockquote:"blockquote",list:"ul",indented:"pre",fence:"pre",html:"pre",hr:"hr",table:"table"}[e]}(t);if(!e)return null;let n=document.createElement(e);"html"===t.type&&(e="html");switch(e){case"hr":break;case"pre":n=function(t,e){const n=t.split("\n"),c=n[0],l=n[n.length-1],o=c.match(/^([`']{3,})(\s*\w+)?/),r=null!==o,s=o?.[2]?.trim()||"code";r&&(n.shift(),/^([`']{3,})\s*$/.test(l)&&n.pop());const a=document.createElement("div");a.className="code-block";const d=document.createElement("div");d.className="code-ribbon",d.textContent=s;const i=document.createElement("code");return i.textContent=n.join("\n"),e.textContent="",e.appendChild(i),a.appendChild(d),a.appendChild(e),a}(t.content,n);break;case"ul":n=function(t){const e=t.split("\n"),n=/^\d+\./.test(e[0].trim())?"ol":"ul",l=document.createElement(n),o=[{indent:0,el:l}];return e.forEach((t=>{const e=t.match(/^(\s*)([-+*]|\d+\.)\s+(.*)/);if(!e)return;const n=e[1].length,l=e[2],r=e[3],s=/^\d+\./.test(l);for(;o.length&&n<o[o.length-1].indent;)o.pop();let a=o[o.length-1];if(n>a.indent){const t=a.el.lastElementChild;if(!t)return;const e=document.createElement(s?"ol":"ul");t.appendChild(e),a={indent:n,el:e},o.push(a)}const d=document.createElement("li");d.appendChild(c(r)),a.el.appendChild(d)})),l}(t.content);break;case"blockquote":const e=function(t){const e=t.split("\n");let n=document.createElement("blockquote");return e.forEach((t=>{const e=t.match(/^\s{0,3}((?:>\s*)+)(.*)/);if(!e)return;const l=(e[1].match(/>/g)||[]).length,o=e[2];let r=n;for(let t=1;t<l;t++){if(!r.lastElementChild||"BLOCKQUOTE"!==r.lastElementChild.tagName){const t=document.createElement("blockquote");r.appendChild(t)}r=r.lastElementChild}const s=document.createElement("p");s.appendChild(c(o)),r.appendChild(s)})),n}(t.content);n.appendChild(e);break;case"html":n.textContent=t.content;break;case"table":return function(t){const e=t.trim().split("\n");if(e.some((t=>/^\s*\+[-+]+\+\s*$/.test(t))))return function(t){const e=document.createElement("table"),n=document.createElement("tbody");e.appendChild(n);return t.filter((t=>!/^\s*\+[-+=+]+\+\s*$/.test(t))).forEach((t=>{const e=document.createElement("tr");t.split("|").map((t=>t.trim())).filter(Boolean).forEach((t=>{const n=document.createElement("td");n.textContent=t,e.appendChild(n)})),n.appendChild(e)})),e}(e);if(e.length<2)return null;const n=document.createElement("table"),c=document.createElement("thead"),l=document.createElement("tbody"),o=e[0].split("|").map((t=>t.trim())).filter(Boolean),r=e[1].split("|").map((t=>t.trim())),s=document.createElement("tr");return o.forEach(((t,e)=>{const n=document.createElement("th");n.textContent=t,r[e]?.startsWith(":")&&r[e]?.endsWith(":")?n.style.textAlign="center":r[e]?.endsWith(":")?n.style.textAlign="right":r[e]?.startsWith(":")&&(n.style.textAlign="left"),s.appendChild(n)})),c.appendChild(s),n.appendChild(c),e.slice(2).forEach((t=>{const e=document.createElement("tr");t.split("|").map((t=>t.trim())).filter(Boolean).forEach((t=>{const n=document.createElement("td");n.textContent=t,e.appendChild(n)})),l.appendChild(e)})),n.appendChild(l),n}(t.content);default:const l=function(t){const e=document.createDocumentFragment();return t.split("\n").forEach((t=>{const n=t.match(/^#{1,6}\s+(.*)/);if(n){const l=t.match(/^#+/)[0].length,o=document.createElement(`h${l}`);o.appendChild(c(n[1])),e.appendChild(o)}else{const n=document.createElement("p");n.appendChild(c(t)),e.appendChild(n)}})),e}(t.content);n.appendChild(l);break}return n}(t);l&&e.appendChild(l)}))}"undefined"!=typeof module&&void 0!==module.exports&&(module.exports={parse:parse});